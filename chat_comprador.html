<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agente para Comprador</title>

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />

    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "ui-sans-serif", "system-ui"],
            },
          },
        },
      };
    </script>

    <link rel="stylesheet" href="chat.css" />
  </head>

  <body class="h-screen flex flex-col font-sans bg-[#f4f6f8] dark:bg-gray-900">
    <!-- ============ HEADER ============ -->
    <header class="bg-green-600 dark:bg-green-700 text-white flex items-center justify-between px-4 py-3 shadow-md gap-4 flex-wrap">
      <h1 class="text-lg font-semibold tracking-wide select-none">Agente para Comprador</h1>

      <div class="flex items-center gap-2 flex-wrap">
        <button id="themeToggle" title="Cambiar tema" class="text-xl leading-none select-none">üåô</button>

        <label for="userSelect" class="hidden sm:block text-sm text-white/80">Usuario:</label>
        <select id="userSelect" class="text-gray-900 rounded-lg px-2 py-1 text-sm focus:outline-none"></select>
        <button id="renameUser" title="Renombrar" class="bg-white/20 hover:bg-white/30 rounded-lg p-1.5">‚úèÔ∏è</button>
        <button id="deleteUser" title="Eliminar" class="bg-white/20 hover:bg-white/30 rounded-lg p-1.5">üóëÔ∏è</button>
      </div>
    </header>

    <!-- ============ CHAT ============ -->
    <main id="chat" class="flex-1 overflow-y-auto p-4 space-y-4"></main>

    <!-- ============ INPUT BAR ============ -->
    <footer class="p-3 bg-white/95 dark:bg-gray-800/90 backdrop-blur-md shadow-inner flex items-end gap-3">
      <textarea
        id="message"
        rows="1"
        placeholder="Escribe tu mensaje‚Ä¶ (Shift+Enter = salto de l√≠nea)"
        class="flex-1 resize-none rounded-xl border border-gray-300 dark:border-gray-700 p-3 focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-800 dark:text-gray-100 max-h-40 overflow-y-auto placeholder:text-gray-400 text-sm"
      ></textarea>
      <button id="send" class="bg-green-600 hover:bg-green-700 text-white rounded-xl px-5 py-3 font-medium shadow-md">Enviar</button>
      <button id="reset" class="bg-red-100 hover:bg-red-200 text-red-600 dark:bg-red-700/60 dark:hover:bg-red-700 dark:text-red-100 rounded-xl px-5 py-3 font-medium shadow-md">Reset</button>
    </footer>

    <!-- ============ SCRIPT ============ -->
    <script src="appendTextOrImages.js"></script>
    <script>
      window.chatConfig = {
        prodEndpoint: "http://localhost:5678/webhook/16dd01d5-1959-48e9-b8b9-c5bb9ce6e2e6",
        testEndpoint: "http://localhost:5678/webhook-test/16dd01d5-1959-48e9-b8b9-c5bb9ce6e2e6",
        usersKey: "compradorUsers",
        historyPrefix: "compradorChat_",
        themeKey: "compradorTheme"
      };
    </script>
    <script src="chat.js"></script>
  </body>
</html>
